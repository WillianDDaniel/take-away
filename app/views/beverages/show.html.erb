<div class="p-6 max-w-4xl mx-auto bg-white shadow-md rounded-lg">
  <h1 class="text-4xl font-bold text-primary mb-4"><%= @beverage.name %></h1>

  <% if @beverage.active? %>
    <p class="text-green-600 font-semibold">Status: Ativo</p>
  <% else %>
    <p class="text-red-500 font-semibold">Status: Pausado</p>
  <% end %>

  <p class="text-gray-700 mt-4 mb-6"><%= @beverage.description %></p>

  <% if @beverage.portions.any? %>
    <ul class="space-y-4">
      <% @beverage.portions.each do |portion| %>
        <li class="flex items-center justify-between border-b py-2">
          <div>
            <p class="text-lg font-medium text-secondary"><%= portion.description %></p>
            <p class="text-gray-600"><%= number_to_currency(portion.price) %></p>
          </div>
          <%= link_to 'Editar porção', edit_beverage_portion_path(@beverage, portion), class: "text-blue-500 hover:underline" %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-gray-600 italic">Nenhuma porção disponível.</p>
  <% end %>

  <p class="mt-6 text-gray-800 font-semibold">Calorias: <%= @beverage.calories %></p>

  <% if @beverage.alcoholic? %>
    <p class="text-red-700 font-medium mt-2">Alcoólica</p>
  <% else %>
    <p class="text-green-700 font-medium mt-2">Não alcoólica</p>
  <% end %>

  <p class="mt-4">
    <strong>Imagem:</strong>
    <% if @beverage.image.attached? %>
      <%= image_tag @beverage.image, class: "w-full h-64 object-cover mt-2 rounded-lg shadow-md" %>
    <% else %>
      <p class="text-gray-500 italic">Nenhuma imagem disponível.</p>
    <% end %>
  </p>

  <div class="mt-8 flex space-x-4">
    <%= link_to "Editar Bebida", edit_beverage_path(@beverage), class: "bg-secondary hover:bg-secondary-dark text-white font-semibold py-2 px-4 rounded" %>
    <%= button_to "Excluir Bebida", @beverage, method: :delete, data: { confirm: "Tem certeza?" }, class: "bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded" %>
    <%= button_to "#{ @beverage.active? ? 'Pausar' : 'Ativar' } vendas", toggle_status_beverage_path(@beverage), method: :patch, class: "bg-primary hover:bg-primary-dark text-white font-semibold py-2 px-4 rounded" %>
    <%= link_to "Adicionar porção", new_beverage_portion_path(@beverage), class: "bg-primary hover:bg-primary-dark text-white font-semibold py-2 px-4 rounded" %>
  </div>

  <h3 class="text-2xl font-semibold text-primary mt-10 mb-4">Histórico de Preços</h3>

  <table class="w-full text-left border border-gray-300 rounded-lg overflow-hidden">
    <thead class="bg-gray-200">
      <tr>
        <th class="p-3">Porção</th>
        <th class="p-3">Preço anterior</th>
        <th class="p-3">Atualizado em</th>
      </tr>
    </thead>
    <tbody>
      <% @beverage.portions.each do |portion| %>
        <% portion.price_histories.each do |price_history| %>
          <tr class="border-t border-gray-200">
            <td class="p-3 text-gray-800"><%= portion.description %></td>
            <td class="p-3 text-gray-800"><%= number_to_currency(price_history.price) %></td>
            <td class="p-3 text-gray-500"><%= I18n.l(price_history.updated_at.to_date) %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
